1:LOCK-S:A
1:READ:A
2:LOCK-S:B
2:READ:B
1:LOCK-X:A
2:LOCK-X:B
3:LOCK-X:C
3:WRITE:C
4:LOCK-X:A
4:READ:A
1:WRITE:A
1:UNLOCK:A
2:LOCK-X:D
2:WRITE:D
4:UNLOCK:A
2:UNLOCK:D
2:UNLOCK:B
3:UNLOCK:C
